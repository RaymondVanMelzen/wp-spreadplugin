/**
 * Plugin Name: WP-Spreadplugin
 * Plugin URI: http://wordpress.org/extend/plugins/wp-spreadplugin/
 * Description: This plugin uses the Spreadshirt API to list articles and let your customers order articles of your Spreadshirt shop using Spreadshirt order process.
 * Version: 3.9.7
 * Author: Thimo Grauerholz
 * Author URI: http://www.spreadplugin.de
 */
 
var ajax_object;jQuery(function(e){function a(){e(".spreadplugin-article .colors li,.spreadplugin-article-detail .colors li").unbind(),e(".spreadplugin-article .views li,.spreadplugin-article-detail .views li").unbind(),e(".spreadplugin-article .description-wrapper div.header,.spreadplugin-article-detail .description-wrapper div.header").unbind(),e(".spreadplugin-article .product-description-wrapper div.header,.spreadplugin-article-detail .product-description-wrapper div.header").unbind(),e(".spreadplugin-design .image-wrapper").unbind(),e(".spreadplugin-article form,.spreadplugin-article-detail form").unbind(),e(".spreadplugin-article .edit-wrapper a,.spreadplugin-article-detail .edit-wrapper a").unbind(),e(".spreadplugin-article .edit-wrapper-integrated a,.spreadplugin-article-detail .edit-wrapper-integrated a").unbind(),e(".spreadplugin-article .details-wrapper a,.spreadplugin-article-detail .details-wrapper a").unbind(),e(".spreadplugin-article .image-wrapper,.spreadplugin-article-detail .image-wrapper").unbind(),e(".spreadplugin-article .shipping-window,.spreadplugin-article-detail .shipping-window").unbind(),e(".spreadplugin-article .colors li,.spreadplugin-article-detail .colors li").click(function(){var a="#"+e(this).closest(".spreadplugin-article,.spreadplugin-article-detail").attr("id"),i=e(a+" img.preview"),t=(i.attr("src"),i.attr("data-zoom-image")),r=i.data("elevateZoom");if(s=e(this).attr("value"),u=e(a+" #view").val(),e(a+" #appearance").val(s),i.attr("src",i.attr("src").replace(/\,appearanceId=(\d+)/g,"")+",appearanceId="+s),i.attr("data-zoom-image",t.replace(/\,appearanceId=(\d+)/g,"").replace(/\,viewId=(\d+)/g,"")+",appearanceId="+s+",viewId="+u),e(a+" img.previewview").each(function(){var a=e(this).attr("src");e(this).attr("src",a.replace(/\,appearanceId=(\d+)/g,"")+",appearanceId="+s)}),r){var n=r.imageSrc.replace(/\,appearanceId=(\d+)/g,"").replace(/\,viewId=(\d+)/g,"");n=n+",appearanceId="+s+",viewId="+u,r.imageSrc=n,r.zoomImage=n,r.currentImage=n,r.zoomWindow&&r.zoomWindow.css({backgroundImage:"url('"+n+"')"}),r.zoomLens&&r.zoomLens.css({backgroundImage:"url('"+n+"')"})}}),e(".spreadplugin-article .views li,.spreadplugin-article-detail .views li").click(function(){var a="#"+e(this).closest(".spreadplugin-article,.spreadplugin-article-detail").attr("id"),i=e(a+" img.preview"),t=i.attr("src"),r=i.attr("data-zoom-image"),n=i.data("elevateZoom");if(u=e(this).attr("value"),s=e(a+" #appearance").val(),e(a+" #view").val(u),i.attr("src",t.replace(/\,viewId=(\d+)/g,"").replace(/width=(\d+)/g,"width="+Math.round(i.width())).replace(/height=(\d+)/g,"height="+Math.round(i.height()))+",viewId="+u),i.attr("data-zoom-image",r.replace(/\,appearanceId=(\d+)/g,"").replace(/\,viewId=(\d+)/g,"")+",appearanceId="+s+",viewId="+u),n){var p=n.imageSrc.replace(/\,appearanceId=(\d+)/g,"").replace(/\,viewId=(\d+)/g,"");p=p+",appearanceId="+s+",viewId="+u,n.imageSrc=p,n.zoomImage=p,n.currentImage=p,n.zoomWindow&&n.zoomWindow.css({backgroundImage:"url('"+p+"')"}),n.zoomLens&&n.zoomLens.css({backgroundImage:"url('"+p+"')"})}}),e(".spreadplugin-article .description-wrapper div.header,.spreadplugin-article-detail .description-wrapper div.header").click(function(){var a=e(this).parent().parent().parent(),i=e(this).next();i.is(":hidden")?(a.addClass("activeDescription"),i.show(),e(this).children("a").html(ajax_object.textHideDesc)):(a.removeClass("activeDescription"),e(".description-wrapper div.description").hide(),e(".description-wrapper div.header a").html(ajax_object.textShowDesc))}),e(".spreadplugin-article .product-description-wrapper div.header,.spreadplugin-article-detail .description-wrapper div.header").click(function(){var a=e(this).parent().parent().parent(),i=e(this).next();i.is(":hidden")?(a.addClass("activeDescription"),i.show(),e(this).children("a").html(ajax_object.textProdHideDesc)):(a.removeClass("activeDescription"),e(".product-description-wrapper div.description").hide(),e(".product-description-wrapper div.header a").html(ajax_object.textProdShowDesc))}),e(".spreadplugin-article form,.spreadplugin-article-detail form").submit(function(a){a.preventDefault();var i=e(this).serialize()+"&action=myAjax",t=this,n=e("#"+t.id+" input[type=submit]").not(".add-basket-button"),p=t.id.split("_"),c=p[1],d=e("#previewimg_"+c).width()/3,o=e("#previewimg_"+c).height()/3,l=e("#previewimg_"+c).offset().left,s=e("#previewimg_"+c).offset().top,u=e(".spreadplugin-checkout").offset().left,g=e(".spreadplugin-checkout").offset().top,h=u-l,m=g-s;return n.val(ajax_object.textButtonAdded),e("#article_"+c+" img.preview").clone().prependTo("#article_"+c).css({position:"absolute"}).css({"z-index":"1008"}).animate({opacity:.9},100).animate({opacity:.1,marginLeft:h,marginTop:m,width:d,height:o},1200,function(){e.post(ajax_object.ajaxLocation,i,function(e){n.val(1==e.c.m?ajax_object.textButtonAdd:ajax_object.textButtonFailed),r(e)},"json"),e(this).remove()}),!1}),e(".spreadplugin-article .shipping-window,.spreadplugin-article-detail .shipping-window").magnificPopup({items:{src:"#spreadplugin-shipment-wrapper"},type:"inline",callbacks:{open:function(){e("#spreadplugin-shipment-wrapper").show(),e("#spreadplugin-shipment-wrapper").parent(".mfp-content").css("width",400)},close:function(){e("#spreadplugin-shipment-wrapper").hide()}}}),e(".spreadplugin-article .edit-wrapper-integrated,.spreadplugin-article-detail .edit-wrapper-integrated").click(function(){var a=(e(this).data("designid"),e(this).data("productid")),i=(e(this).data("viewid"),e(this).data("appearanceid"),e(this).data("producttypeid"));e.magnificPopup.open({items:{type:"inline",src:"#spreadplugin-designer-wrapper"},callbacks:{open:function(){e(".mfp-iframe-holder .mfp-content").css("height",e(window).height()-200),n(a,i)},resize:function(){e(".mfp-iframe-holder .mfp-content").css("height",e(window).height()-200)},close:function(){e("#spreadplugin-designer").html("")}}})}),2==ajax_object.pageCheckoutUseIframe&&(e(".spreadplugin-article .edit-wrapper a,.spreadplugin-article-detail .edit-wrapper a").magnificPopup({type:"iframe",callbacks:{open:function(){e(".mfp-iframe-holder .mfp-content").css("height",e(window).height()-200)},resize:function(){e(".mfp-iframe-holder .mfp-content").css("height",e(window).height()-200)}}}),e(".spreadplugin-article .details-wrapper a,.spreadplugin-article-detail .details-wrapper a").magnificPopup({type:"iframe",preloader:!0})),e(".spreadplugin-article:not(.min-view) .image-wrapper a,.spreadplugin-article-detail .image-wrapper a").magnificPopup({type:"iframe",preloader:!0}),e(".spreadplugin-design .image-wrapper").click(function(){var a=e(this).parent().attr("id");a="#"+a.replace("design","designContainer"),e(a).is(":hidden")?(e(a).addClass("active"),e(a).slideDown("slow")):e("#spreadplugin-list .design-container").slideUp("slow",function(){e(this).removeClass("active")})})}function i(){e(".spreadplugin-article img.preview,.spreadplugin-article-detail img.preview").unbind(),e("div.spreadplugin-article.min-view").unbind(),e(".spreadplugin-design div.image-wrapper").each(function(){e(this).hover(function(){e(this).find(".img-caption").stop(!0).css("display","inline-block").animate({top:-50},{queue:!1,duration:400})},function(){e(this).find(".img-caption").stop(!0).hide().animate({top:0})})}),1==ajax_object.zoomActivated&&e(".spreadplugin-article img.preview,.spreadplugin-article-detail img.preview").hover(function(){e(this).elevateZoom(ajax_object.zoomConfig)}),e(".spreadplugin-article ul.soc-icons a,.spreadplugin-article-detail ul.soc-icons a").hover(function(){e(this).parent().css("background-color",e(this).attr("data-color"))},function(){e(this).parent().removeAttr("style")}),e("div.spreadplugin-article.min-view").hover(function(){e(this).addClass("active")},function(){e(this).removeClass("active")});var a=1;e("div.spreadplugin-article.min-view").css("opacity",a).hover(function(){e(this).prevAll().stop().not(".clear,#infscr-loading").fadeTo("slow",.6),e(this).nextAll().stop().not(".clear,#infscr-loading").fadeTo("slow",.6)},function(){e(this).prevAll().stop().not(".clear,#infscr-loading").fadeTo("slow",a),e(this).nextAll().stop().not(".clear,#infscr-loading").fadeTo("slow",a)})}function t(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var a="[\\?&]"+e+"=([^&#]*)",i=new RegExp(a),t=i.exec(window.location.search);return null==t?"":encodeURIComponent(decodeURIComponent(t[1].replace(/\+/g," ")))}function r(a){e(".spreadplugin-checkout a").attr("href",a.c.u),e(".spreadplugin-checkout a").removeAttr("title"),e(".spreadplugin-checkout span").text(a.c.q),e(".spreadplugin-cart-checkout a").attr("href",a.c.u),e.get(ajax_object.ajaxLocation,"action=myCart",function(a){if(e(".spreadplugin-cart").html(a),1==ajax_object.pageCheckoutUseIframe&&e(".spreadplugin-cart-checkout a").click(function(a){a.preventDefault();var i=e(this).attr("href");"undefined"!=typeof i&&i.length>0&&(e("#spreadplugin-items #pagination").remove(),e("#spreadplugin-items #spreadplugin-menu").remove(),e(window).unbind(".infscr"),e("#spreadplugin-list").html('<iframe style="z-index:10002" id="checkoutFrame" frameborder="0" width="900" height="2000" scroll="yes">'),e("#spreadplugin-list #checkoutFrame").attr("src",i),e("html, body").animate({scrollTop:e("#spreadplugin-items #checkoutFrame").offset().top},2e3))}),2==ajax_object.pageCheckoutUseIframe){var i=e(".spreadplugin-cart-checkout a").attr("href");"undefined"!=typeof i&&i.length>0&&e(".spreadplugin-cart-checkout a").magnificPopup({type:"iframe",callbacks:{close:function(){location.reload()}}})}e(".cart-row a.deleteCartItem").click(function(a){a.preventDefault,e(this).closest(".cart-row").show().fadeOut("slow"),e.post(ajax_object.ajaxLocation,"action=myDelete&id="+e(this).closest(".cart-row").data("id"),function(){})}),e(".spreadplugin-cart-close").click(function(a){a.preventDefault(),e(".spreadplugin-cart").hide()})})}function n(a,i){spreadshirt.create("tablomat",{shopId:ajax_object.designerShopId,target:document.getElementById(ajax_object.designerTargetId),platform:ajax_object.designerPlatform,locale:ajax_object.designerLocale,width:ajax_object.designerWidth,productId:a,setProductType:i,addToBasket:function(a,i){var t={article:a.product.id,size:a.size.id,appearance:a.appearance.id,quantity:a.quantity,shopId:a.shopId,action:"myAjax",type:"1"};e.post(ajax_object.ajaxLocation,t,function(e){1==e.c.m?i&&i():i&&i(!0),r(e)},"json")}},function(e){e&&console.log(e)})}var p="?",c=t("productCategory"),d=t("productSubCategory"),o=t("articleSortBy"),l=".spreadplugin-article",s="",u="";if(1==ajax_object.display&&(l=".spreadplugin-designs"),ajax_object.pageLink.indexOf("?")>-1&&(p="&"),e(".spreadplugin-cart").hide(),e(document).click(function(a){"spreadplugin-checkout-link"!=a.target.className&&"spreadplugin-checkout-link button"!=a.target.className&&e(".spreadplugin-cart").is(":visible")&&!e(".spreadplugin-cart").find(a.target).length&&e(".spreadplugin-cart").hide()}),e(".spreadplugin-items select").hover(function(e){e.stopPropagation()}),0!=e(".spreadplugin-menu").length){var g=e("#spreadplugin-menu").offset().top-parseFloat(e("#spreadplugin-menu").css("margin-top").replace(/auto/,0));e(window).scroll(function(){var a=e(this).scrollTop();a>=g-0?(e("#spreadplugin-menu").addClass("fixed"),e("#spreadplugin-menu").css("width",e("div.spreadplugin-items").width())):(e("#spreadplugin-menu").css("width",""),e("#spreadplugin-menu").removeClass("fixed"))})}e(window).resize(function(){e(".img-caption").hide()}),1==ajax_object.infiniteScroll&&e("#spreadplugin-list").infinitescroll({nextSelector:"#spreadplugin-items #pagination a",navSelector:"#spreadplugin-items #pagination",itemSelector:"#spreadplugin-list "+l,loading:{img:ajax_object.loadingImage,msgText:ajax_object.loadingMessage,finishedMsg:ajax_object.loadingFinishedMessage},animate:!0,debug:!1,bufferPx:40},function(){a(),i(),1==ajax_object.lazyLoad&&e("img.lazyimg").lazyload({effect:"fadeIn"})}),e("#spreadplugin-items #productCategory").change(function(){c=e(this).val(),document.location=ajax_object.pageLink+p+"productCategory="+c+"&articleSortBy="+o}),e("#spreadplugin-items #productSubCategory").change(function(){d=e(this).val(),document.location=ajax_object.pageLink+p+"productCategory="+c+"&productSubCategory="+d+"&articleSortBy="+o}),e("#spreadplugin-items #articleSortBy").change(function(){o=e(this).val(),document.location=ajax_object.pageLink+p+"productCategory="+c+"&productSubCategory="+d+"&articleSortBy="+o}),e(".spreadplugin-checkout-link").click(function(a){a.preventDefault();var i=e(this).parent().next(".spreadplugin-cart");"spreadplugin-widget-cart"==i.attr("id")&&i.css("position","relative"),i.is(":hidden")?i.css("display","inline-block"):i.hide()}),e.post(ajax_object.ajaxLocation,"action=myAjax",function(e){r(e)},"json"),a(),i(),1==ajax_object.lazyLoad&&e("img.lazyimg").lazyload({effect:"fadeIn"}),e("#spreadplugin-tabs li a").click(function(){return e("#spreadplugin-tabs li").removeClass("active"),e(this).parent().addClass("active"),e(".spreadplugin-tab_content").hide(),e(e(this).parent().find("a").attr("href")).fadeIn(),!1})});