/**
 * Plugin Name: WP-Spreadplugin
 * Plugin URI: http://wordpress.org/extend/plugins/wp-spreadplugin/
 * Description: This plugin uses the Spreadshirt API to list articles and let your customers order articles of your Spreadshirt shop using Spreadshirt order process.
 * Version: 3.7
 * Author: Thimo Grauerholz
 * Author URI: http://www.spreadplugin.de
 */

function setMessage(e){jQuery("#message").append(e);jQuery("#message").show()}function rebuildItem(e,t,n){if(n==0){setMessage("Rebuilding Page "+(t+1)+" of "+e.length+" ("+e[t].title+")...<br>")}if(n>=e[t].items.length){setMessage("Done<br>");jQuery.ajax({url:"<?php echo admin_url('admin-ajax.php'); ?>",type:"POST",data:"action=rebuildCache&do=save&_pageid="+e[t].id,success:function(e){setMessage("Successfully stored page "+t+"<br>")},error:function(e,n,r){setMessage("Error "+e.status+" storing page "+t+"<br>")}});t=t+1;if(e[t]){rebuildItem(e,t,0)}return}setMessage("Rebuilding Item "+(n+1)+" of "+e[t].items.length+" ("+e[t].items[n].articlename+") <img src='"+e[t].items[n].previewimage+"' width='32' height='32'>... ");jQuery.ajax({url:"<?php echo admin_url('admin-ajax.php'); ?>",type:"POST",data:"action=rebuildCache&do=rebuild&_pageid="+e[t].id+"&_articleid="+e[t].items[n].articleid,success:function(r){setMessage(r+" <br>");n=n+1;rebuildItem(e,t,n)},error:function(r,i,s){setMessage("Error "+r.status+". Try next<br>");n=n+1;rebuildItem(e,t,n)}})}function rebuild(){jQuery("html, body").animate({scrollTop:0},800);setMessage("Reading pages. Please wait.<br>");jQuery.ajax({url:"<?php echo admin_url('admin-ajax.php'); ?>",type:"POST",data:"action=rebuildCache&do=getlist",dataType:"json",success:function(e){var t=e;if(!t){setMessage("No pages found.<br>");return}var n=0;var r=0;rebuildItem(t,n,r)},error:function(e,t,n){setMessage("Error"+" "+e.status+"<br>")}})}jQuery(".only-digit").keyup(function(){if(/\D/g.test(this.value)){this.value=this.value.replace(/\D/g,"")}});jQuery("#shop_locale").change(function(){var e=jQuery(this).val();if(e=="us_US"||e=="us_CA"||e=="fr_CA"){jQuery("#shop_source").val("com")}else{jQuery("#shop_source").val("net")}});jQuery("#splg_options_form").submit(function(){var e=true;jQuery("#splg_options_form .required").each(function(){if(jQuery.trim(jQuery(this).val()).length==0){jQuery(this).parent().addClass("highlight");e=false}else{jQuery(this).parent().removeClass("highlight")}});if(!e){setMessage("<p><?php _e('Please fill in the highlighted fields!','spreadplugin'); ?></p>")}else{return true}return false});jQuery(document).ready(function(){jQuery(".colorpicker").wpColorPicker()})